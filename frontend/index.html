<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Rate Engine</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        #quote-workflow {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #quote-workflow h2 {
            text-align: center;
            color: #333;
            margin-bottom: 1.5rem;
        }
        fieldset {
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        legend {
            font-weight: 600;
            padding: 0 0.5rem;
            color: #007bff;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .form-group input[readonly] {
            background-color: #e9ecef;
            cursor: not-allowed;
        }
        .toggle-switch {
            display: flex;
            border: 1px solid #ced4da;
            border-radius: 4px;
            overflow: hidden;
        }
        .toggle-switch input[type="radio"] {
            display: none;
        }
        .toggle-switch label {
            padding: 0.5rem 1rem;
            cursor: pointer;
            background-color: #fff;
            color: #495057;
            text-align: center;
            flex-grow: 1;
            margin: 0;
        }
        .toggle-switch input[type="radio"]:checked + label {
            background-color: #007bff;
            color: #fff;
        }
        #pieces-table {
            width: 100%;
            border-collapse: collapse;
        }
        #pieces-table th, #pieces-table td {
            border: 1px solid #dee2e6;
            padding: 0.5rem;
            text-align: center;
        }
        #pieces-table th {
            background-color: #f2f2f2;
        }
        #pieces-table input {
            width: 90%;
        }
        #add-row-btn, .remove-row-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 1rem;
        }
        .remove-row-btn {
            background-color: #dc3545;
            padding: 0.25rem 0.5rem;
        }
        .form-actions {
            text-align: right;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="placeholder-logo.png" alt="Project Rate Engine Logo">
        </div>
        <h1>Project Rate Engine</h1>
    </header>
    <main>
        <section id="quote-workflow">
            <h2>Air Freight Quotation</h2>
            <form id="air-freight-quote-form">
                <fieldset>
                    <legend>Service Setup</legend>
                    <div class="form-group">
                        <label for="service-type">Service</label>
                        <input type="text" id="service-type" name="service-type" value="Air Freight" readonly>
                    </div>
                    <div class="form-group">
                        <label>Direction</label>
                        <div class="toggle-switch">
                            <input type="radio" id="import" name="direction" value="import" checked>
                            <label for="import">Import</label>
                            <input type="radio" id="export" name="direction" value="export">
                            <label for="export">Export</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="route-type">Route Type</label>
                        <select id="route-type" name="route-type">
                            <option value="international">International</option>
                            <option value="domestic">Domestic</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="commodity-type">Commodity Type</label>
                        <select id="commodity-type" name="commodity-type">
                            <option value="general">General</option>
                            <option value="dg">Dangerous Goods</option>
                            <option value="perishables">Perishables</option>
                            <option value="live-animals">Live Animals</option>
                            <option value="aog">AOG</option>
                        </select>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Shipment Details</legend>
                    <div class="form-group">
                        <label for="origin">Origin Airport</label>
                        <input type="text" id="origin" name="origin" placeholder="e.g., LAX">
                    </div>
                    <div class="form-group">
                        <label for="destination">Destination Airport</label>
                        <input type="text" id="destination" name="destination" placeholder="e.g., SYD">
                    </div>
                    <div class="form-group">
                        <label for="incoterm">Incoterm</label>
                        <select id="incoterm" name="incoterm">
                            <option value="exw">EXW</option>
                            <option value="fca">FCA</option>
                            <option value="cpt">CPT</option>
                            <option value="cip">CIP</option>
                            <option value="dap">DAP</option>
                            <option value="dpu">DPU</option>
                            <option value="ddp">DDP</option>
                        </select>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Pieces</legend>
                    <table id="pieces-table">
                        <thead>
                            <tr>
                                <th>Number of Pieces</th>
                                <th>Length (cm)</th>
                                <th>Width (cm)</th>
                                <th>Height (cm)</th>
                                <th>Weight per Piece (kg)</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="number" name="pieces" value="1" min="1"></td>
                                <td><input type="number" name="length" placeholder="L"></td>
                                <td><input type="number" name="width" placeholder="W"></td>
                                <td><input type="number" name="height" placeholder="H"></td>
                                <td><input type="number" name="weight" placeholder="kg"></td>
                                <td><button type="button" class="remove-row-btn">&times;</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="button" id="add-row-btn">Add Row</button>
                </fieldset>

                <fieldset>
                    <legend>Chargeable Weight</legend>
                    <div class="form-group">
                        <label for="total-actual-weight">Total Actual Weight (kg)</label>
                        <input type="text" id="total-actual-weight" name="total-actual-weight" readonly>
                    </div>
                    <div class="form-group">
                        <label for="total-volumetric-weight">Total Volumetric Weight (kg)</label>
                        <input type="text" id="total-volumetric-weight" name="total-volumetric-weight" readonly>
                    </div>
                    <div class="form-group">
                        <label for="chargeable-weight">Chargeable Weight (kg)</label>
                        <input type="text" id="chargeable-weight" name="chargeable-weight" readonly>
                    </div>
                </fieldset>
                
                <fieldset>
                    <legend>Ancillary Charges</legend>
                    <div class="form-group">
                        <label for="origin-cartage">Origin Cartage</label>
                        <input type="number" id="origin-cartage" name="origin-cartage" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="origin-docs">Origin Docs</label>
                        <input type="number" id="origin-docs" name="origin-docs" placeholder="0.00">
                    </div>
                     <div class="form-group" id="origin-dg-surcharge-group" style="display: none;">
                        <label for="origin-dg-surcharge">Origin DG Surcharge</label>
                        <input type="number" id="origin-dg-surcharge" name="origin-dg-surcharge" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="dest-agency-fee">Destination Agency Fee</label>
                        <input type="number" id="dest-agency-fee" name="dest-agency-fee" value="275.00">
                    </div>
                    <div class="form-group">
                        <label for="dest-cartage">Destination Cartage</label>
                        <input type="number" id="dest-cartage" name="dest-cartage" placeholder="37.50/WM + fuel">
                    </div>
                    <div class="form-group" id="dest-dg-surcharge-group" style="display: none;">
                        <label for="dest-dg-surcharge">Destination DG Surcharge</label>
                        <input type="number" id="dest-dg-surcharge" name="dest-dg-surcharge" placeholder="Min AUD 275">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="customs-clearance" name="customs-clearance">
                            Optional Customs Clearance
                        </label>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Quote Summary</legend>
                    <div class="form-group">
                        <label for="freight-charges">Freight Charges</label>
                        <input type="text" id="freight-charges" name="freight-charges" readonly>
                    </div>
                    <div class="form-group">
                        <label for="surcharges">Surcharges (Fuel & Security)</label>
                        <input type="text" id="surcharges" name="surcharges" readonly>
                    </div>
                    <div class="form-group">
                        <label for="ancillary-total">Ancillary Charges</label>
                        <input type="text" id="ancillary-total" name="ancillary-total" readonly>
                    </div>
                    <div class="form-group">
                        <label for="total-quote">Total Quote</label>
                        <input type="text" id="total-quote" name="total-quote" readonly>
                    </div>
                     <div class="form-group">
                        <label for="quote-notes">Notes</label>
                        <textarea id="quote-notes" name="quote-notes" rows="4"></textarea>
                    </div>
                </fieldset>
                
                <div class="form-actions">
                    <button type="button" id="save-quote-btn" class="cta-button">Save Quote</button>
                    <button type="button" id="pdf-export-btn" class="cta-button">Export as PDF</button>
                    <button type="button" id="email-quote-btn" class="cta-button">Email Quote</button>
                </div>
            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Project Rate Engine. All rights reserved.</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const piecesTable = document.getElementById('pieces-table').getElementsByTagName('tbody')[0];
            const addRowBtn = document.getElementById('add-row-btn');

            const totalActualWeightEl = document.getElementById('total-actual-weight');
            const totalVolumetricWeightEl = document.getElementById('total-volumetric-weight');
            const chargeableWeightEl = document.getElementById('chargeable-weight');

            function calculateWeights() {
                let totalActualWeight = 0;
                let totalVolumetricWeight = 0;

                for (let row of piecesTable.rows) {
                    const pieces = parseFloat(row.cells[0].children[0].value) || 0;
                    const length = parseFloat(row.cells[1].children[0].value) || 0;
                    const width = parseFloat(row.cells[2].children[0].value) || 0;
                    const height = parseFloat(row.cells[3].children[0].value) || 0;
                    const weight = parseFloat(row.cells[4].children[0].value) || 0;

                    totalActualWeight += pieces * weight;
                    totalVolumetricWeight += (pieces * length * width * height) / 6000;
                }

                totalActualWeightEl.value = totalActualWeight.toFixed(2);
                totalVolumetricWeightEl.value = totalVolumetricWeight.toFixed(2);
                chargeableWeightEl.value = Math.max(totalActualWeight, totalVolumetricWeight).toFixed(2);
            }

            function addRow() {
                const newRow = piecesTable.rows[0].cloneNode(true);
                const inputs = newRow.getElementsByTagName('input');
                for (let input of inputs) {
                    input.value = '';
                }
                inputs[0].value = '1'; // Default pieces to 1
                piecesTable.appendChild(newRow);
                attachRowEventListeners(newRow);
                calculateWeights();
            }

            function removeRow(e) {
                if (e.target.classList.contains('remove-row-btn')) {
                    if (piecesTable.rows.length > 1) {
                        e.target.closest('tr').remove();
                        calculateWeights();
                    } else {
                        alert('You must have at least one row.');
                    }
                }
            }

            function attachRowEventListeners(row) {
                const inputs = row.getElementsByTagName('input');
                for (let input of inputs) {
                    input.addEventListener('input', calculateWeights);
                }
            }

            addRowBtn.addEventListener('click', addRow);
            piecesTable.addEventListener('click', removeRow);

            // Initial calculation
            attachRowEventListeners(piecesTable.rows[0]);
            calculateWeights();
        });
    </script>
</body>
</html>