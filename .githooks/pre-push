#!/bin/sh

echo "ğŸ”’ Running .env validation..."
node .env.validate.js
if [ $? -ne 0 ]; then
  echo "âŒ .env validation failed. Aborting push."
  exit 1
fi

echo "ğŸ•µï¸ Running Gitleaks secret scan..."
gitleaks detect --source . --report-path gitleaks-report.json --redact
if [ $? -ne 0 ]; then
  echo "âŒ Gitleaks found secrets. Check gitleaks-report.json for details. Aborting push."
  exit 1
fi

echo "âœ… All checks passed. Proceeding with push..."
exit 0
